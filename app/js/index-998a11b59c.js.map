{"version":3,"sources":["index.js"],"names":[],"mappings":"AAAA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA","file":"index-998a11b59c.js","sourcesContent":["let empty_object = {\r\n    \"id\": \"\",\r\n    \"name\": \"\",\r\n    \"email\": \"\",\r\n    \"memory_limit\": \"\",\r\n    \"operation\": \"singup\"\r\n};\r\n\r\nlet logged_in_object = empty_object;\r\n\r\n$(document).ready(function () {\r\n    isLoggedIn();\r\n\r\n    // getUserData();\r\n\r\n    $(document).on(\"click\", \"#edit_profile\", function () {\r\n        getEditProfile();\r\n    });\r\n\r\n    $(document).on(\"click\", \".delete_file\", function () {\r\n        openConfirmDeleteModal();\r\n    });\r\n\r\n    $(document).on(\"click\", \"#upload_file\", function () {\r\n        openUploadModal();\r\n    });\r\n\r\n    $(document).on(\"click\", \"#change_password_gui\", function () {\r\n        openChangePasswordModal();\r\n    });\r\n\r\n    $(document).on(\"click\", \"#logout\", function () {\r\n        openConfirmLogout();\r\n    });\r\n\r\n    $(document).on(\"click\", \"#confirm_logout\", function () {\r\n        logout();\r\n    });\r\n\r\n    $(document).on(\"click\", \"#add_user\", function () {\r\n        openUserModal(\"add\", \"primary\", getEmptyObject(\"add\"));\r\n    });\r\n\r\n    $(document).on(\"click\", \".edit_user\", function () {\r\n        getUserData($(this).closest(\"tr\").attr(\"data-id\"));\r\n    });\r\n\r\n    $(document).on(\"submit\", \"#sign_up_form\", function () {\r\n        if (isLoginFormValid()) {\r\n            checkLogin();\r\n        }\r\n        return false;\r\n    });\r\n\r\n    $(document).on(\"submit\", \"#change_password_form\", function () {\r\n        if (isLoginFormValid()) {\r\n            changePassword();\r\n        }\r\n        return false;\r\n    });\r\n\r\n    $(document).on(\"submit\", \"#file_upload_form\", function () {\r\n        if (isFilesValid()) {\r\n            uploadFiles();\r\n        }\r\n        return false;\r\n    });\r\n\r\n    $(document).on(\"submit\", \"#add_edit_form\", function () {\r\n        if (isLoginFormValid()) {\r\n            addEditUser($(this));\r\n        }\r\n        return false;\r\n    });\r\n\r\n    $(document).on(\"submit\", \"#login_form\", function () {\r\n        if (isLoginFormValid()) {\r\n            checkLogin();\r\n        }\r\n        return false;\r\n    });\r\n\r\n    $(document).on(\"click\", \"#sign_up_gui\", function () {\r\n        displaySignUpForm(getEmptyObject(\"signup\"));\r\n    });\r\n\r\n    $(document).on(\"click\", \"#sign_in_gui\", function () {\r\n        displayLoginForm(empty_object);\r\n    });\r\n});\r\n\r\nfunction isFilesValid() {\r\n    return true;\r\n}\r\n\r\nfunction getEmptyObject(operation) {\r\n    let ob = empty_object;\r\n    ob.operation = operation;\r\n    return ob;\r\n}\r\n\r\nfunction getUserForm(json_ob, id) {\r\n    let gui = \"\";\r\n\r\n    gui += \"<form class='form-horizontal' id='\" + id + \"'>\";\r\n\r\n    gui += getTextFiled(\"Name\", \"user_name\", \"Name\", \"text\", json_ob.name);\r\n    gui += getTextFiled(\"Email\", \"user_email\", \"Email\", \"email\", json_ob.email);\r\n\r\n    switch (json_ob.operation) {\r\n        case \"signup\":\r\n            gui += getTextFiled(\"Password\", \"user_password\", \"Password\", \"password\");\r\n            gui += getTextFiled(\"Repeat Password\", \"user_password_2\", \"Repeat Password\", \"password\");\r\n            break;\r\n        case \"add\":\r\n        case \"edit\":\r\n            gui += getTextFiled(\"Memory\", \"memory_limit\", \"Memory\", \"text\", json_ob.memory_limit);\r\n            break;\r\n    }\r\n\r\n    gui += \"<div class='form-group btn_group'>\";\r\n    gui += \"<div class='col-sm-offset-2 col-sm-10'>\";\r\n\r\n    if (json_ob.operation === \"signup\") {\r\n        gui += getButton(\"submit\", \"primary\", \"Sign Up\");\r\n        gui += getButton(\"reset\", \"default\", \"Clear\");\r\n        gui += getButton(\"button\", \"info pull-right\", \"Sign In\", \"sign_in_gui\");\r\n    }\r\n\r\n    gui += \"</div>\";\r\n    gui += \"</div>\";\r\n    gui += \"</form>\";\r\n\r\n    return gui;\r\n}\r\n\r\nfunction displaySignUpForm() {\r\n    let gui = \"\";\r\n    gui += \"<div class='row'>\";\r\n    gui += \"<div class='col-md-6 col-md-offset-3 col-lg-4 col-lg-offset-3'>\";\r\n    gui += \"<fieldset>\";\r\n    gui += \"<legend>Sign-Up</legend>\";\r\n\r\n    gui += getUserForm(empty_object, \"sign_up_form\");\r\n\r\n    gui += \"</fieldset>\";\r\n    gui += \"</div>\";\r\n    gui += \"</div>\";\r\n\r\n    $(\"#main_container\").html(gui);\r\n}\r\n\r\nfunction isLoginFormValid() {\r\n    return true;\r\n}\r\n\r\nfunction checkLogin() {\r\n    $.ajax({\r\n        url: \"../classes/user.php\",\r\n        beforeSend: function () {\r\n        },\r\n        data: {\r\n            operation: \"check_login\",\r\n            email: $(\"#login_form #user_email\").val(),\r\n            password: $(\"#login_form #user_password\").val()\r\n        },\r\n        type: \"POST\",\r\n        success: function (response) {\r\n            var json_ob = JSON.parse(response);\r\n            if (json_ob !== false) {\r\n                if (json_ob.logged_in_user === false) {\r\n                    showAlert(setError(\"Invalid credentials\"));\r\n                } else {\r\n                    showAlert(setSuccess(\"Welcome \" + capitalizeEachWord(json_ob.logged_in_user.name)));\r\n                    logged_in_object = json_ob.logged_in_user;\r\n\r\n                    if (json_ob.hasOwnProperty(\"users\")) {\r\n                        displayUserTable(json_ob.users);\r\n                    } else {\r\n                        displayUserFiles(json_ob);\r\n                    }\r\n                }\r\n            }\r\n        },\r\n        error: function (response) {\r\n        }\r\n    });\r\n}\r\n\r\nfunction addEditUser(ele) {\r\n    let operation = $(\"#user_operation\").attr(\"data-operation\");\r\n    let id = $(\"#user_operation\").attr(\"data-user_id\");\r\n\r\n    $.ajax({\r\n        url: \"../classes/user.php\",\r\n        beforeSend: function () {\r\n        },\r\n        data: {\r\n            operation: operation,\r\n            id: id,\r\n            name: $(\"#add_edit_form #user_name\").val(),\r\n            email: $(\"#add_edit_form #user_email\").val(),\r\n            memory_limit: $(\"#add_edit_form #memory_limit\").val()\r\n        },\r\n        type: \"POST\",\r\n        success: function (response) {\r\n            var json_ob = JSON.parse(response);\r\n            if (json_ob !== false) {\r\n                destroyModal($(\"#user_modal\"));\r\n                showAlert(json_ob.message);\r\n                logged_in_object = json_ob.logged_in_user;\r\n                $(\"#logged_username\").html(logged_in_object.name);\r\n                displayUserTable(json_ob.users);\r\n            }\r\n        },\r\n        error: function (response) {\r\n        }\r\n    });\r\n}\r\n\r\nfunction displayLoginForm(login_object) {\r\n    let gui = \"\";\r\n\r\n    gui += \"<div class='row'>\";\r\n    gui += \"<div class='col-md-6 col-md-offset-3 col-lg-4 col-lg-offset-3'>\";\r\n    gui += \"<fieldset>\";\r\n    gui += \"<legend>Login</legend>\";\r\n    gui += \"<form class='form-horizontal' id='login_form'>\";\r\n\r\n    gui += getTextFiled(\"Email\", \"user_email\", \"Email\", \"email\", login_object.email);\r\n    gui += getTextFiled(\"Password\", \"user_password\", \"Password\", \"password\");\r\n\r\n    gui += \"<div class='form-group btn_group'>\";\r\n    gui += \"<div class='col-sm-offset-2 col-sm-10'>\";\r\n\r\n    gui += getButton(\"submit\", \"primary\", \"Sign In\");\r\n    gui += getButton(\"reset\", \"default\", \"Clear\");\r\n    gui += getButton(\"button\", \"info pull-right\", \"Sign Up\", \"sign_up_gui\");\r\n\r\n    gui += \"</div>\";\r\n    gui += \"</div>\";\r\n    gui += \"</form>\";\r\n    gui += \"</fieldset>\";\r\n    gui += \"</div>\";\r\n    gui += \"</div>\";\r\n\r\n    $(\"#main_container\").html(gui);\r\n}\r\n\r\n\r\nfunction getUserData(id = \"\") {\r\n    $.ajax({\r\n        url: \"../classes/user.php\",\r\n        beforeSend: function () {\r\n        },\r\n        data: {\r\n            operation: \"get_user_data\",\r\n            id: id\r\n        },\r\n        type: \"POST\",\r\n        success: function (response) {\r\n            var json_ob = JSON.parse(response);\r\n            if (json_ob !== false) {\r\n                if (id === \"\") {\r\n                    displayUserTable(json_ob);\r\n                } else {\r\n                    json_ob[0].operation = \"edit\";\r\n                    openUserModal(\"edit\", \"warning\", json_ob[0]);\r\n                }\r\n            }\r\n        },\r\n        error: function (response) {\r\n        }\r\n    });\r\n}\r\n\r\nfunction getProfileMenu(jsob_ob) {\r\n    let gui = \"\";\r\n    gui += \"<div class='btn-group pull-right'>\";\r\n    gui += \"<button type='button' class='btn btn-default btn-xs dropdown-toggle' data-toggle='dropdown' aria-haspopup='true' aria-expanded='false'>\";\r\n    gui += \"Welcome <span id='logged_username'>\" + capitalizeEachWord(jsob_ob.name) + \"</span> <span class='caret'></span>\";\r\n    gui += \"</button>\";\r\n    gui += \"<ul class='dropdown-menu'>\";\r\n    gui += \"<li><a href='#' id='edit_profile'>Edit Profile</a></li>\";\r\n    gui += \"<li><a href='#' id='change_password_gui'>Change Password</a></li>\";\r\n    gui += \"<li><a href='#' id='logout'>Logout</a></li>\";\r\n    gui += \"</ul>\";\r\n    gui += \"</div>\";\r\n    return gui;\r\n}\r\n\r\n\r\nfunction displayUserTable(json_ob) {\r\n    let gui = \"\";\r\n\r\n    gui += \"<div class='row'>\";\r\n    gui += \"<div class='col-md-7'>\";\r\n    gui += \"<div class='table-responsive'>\";\r\n    gui += \"<table class='table table-bordered'>\";\r\n    gui += \"<caption>\";\r\n    gui += getButton(\"button\", \"primary btn-xs\", \"Add User\", \"add_user\");\r\n    gui += getProfileMenu(logged_in_object);\r\n    gui += \"</caption>\";\r\n    gui += \"<thead>\";\r\n    gui += \"<tr>\";\r\n    gui += \"<th class='small_cell'>#</th>\";\r\n    gui += \"<th class='small_cell'>Operations</th>\";\r\n    gui += \"<th>Name</th>\";\r\n    gui += \"<th>Email</th>\";\r\n    gui += \"<th>Limit</th>\";\r\n    gui += \"</tr>\";\r\n    gui += \"</thead>\";\r\n    gui += \"<tbody>\";\r\n\r\n    $.each(json_ob, function (i, row) {\r\n        gui += \"<tr data-id='\" + row.id + \"'>\";\r\n        gui += \"<td class='small_cell text-center'>\" + (i + 1) + \"</td>\";\r\n        gui += \"<td class='btn_group'>\";\r\n        gui += getButton(\"button\", \"warning btn-xs edit_user\", \"Edit\");\r\n        gui += getButton(\"button\", \"danger btn-xs delete_user\", \"Delete\");\r\n        gui += \"</td>\";\r\n        gui += \"<td>\" + row.name + \"</td>\";\r\n        gui += \"<td>\" + row.email + \"</td>\";\r\n        gui += \"<td class='small_cell text-center'>\" + row.memory_limit + \"</td>\";\r\n        gui += \"</tr>\";\r\n    });\r\n\r\n    gui += \"</tbody>\";\r\n    gui += \"</table>\";\r\n    gui += \"</div>\";\r\n    gui += \"</div>\";\r\n    gui += \"</div>\";\r\n\r\n    $(\"#main_container\").html(gui);\r\n}\r\n\r\nfunction displayUserFiles(json_ob) {\r\n    let gui = \"\";\r\n\r\n    gui += \"<div class='row'>\";\r\n    gui += \"<div class='col-md-7'>\";\r\n    gui += \"<div class='table-responsive'>\";\r\n    gui += \"<table class='table table-bordered'>\";\r\n    gui += \"<caption>\";\r\n    gui += getButton(\"button\", \"primary btn-xs\", \"Upload\", \"upload_file\");\r\n    gui += getProfileMenu(logged_in_object);\r\n    gui += \"</caption>\";\r\n    gui += \"<thead>\";\r\n    gui += \"<tr>\";\r\n    gui += \"<th colspan='4' class='text-right'>Memory Usage : \" + json_ob.user_files.total_size + \" / \" + logged_in_object.memory_limit + \" MB</th>\";\r\n    gui += \"</tr>\";\r\n\r\n    gui += \"<tr>\";\r\n    gui += \"<th class='small_cell'>#</th>\";\r\n    gui += \"<th class='small_cell'>Operations</th>\";\r\n    gui += \"<th>File</th>\";\r\n    gui += \"<th>Size</th>\";\r\n    gui += \"</tr>\";\r\n    gui += \"</thead>\";\r\n    gui += \"<tbody>\";\r\n\r\n    $.each(json_ob.user_files.files, function (i, file) {\r\n        gui += \"<tr>\";\r\n        gui += \"<td class='small_cell text-center'>\" + (i + 1) + \"</td>\";\r\n        gui += \"<td class='btn_group text-center'>\";\r\n        gui += getButton(\"button\", \"danger btn-xs delete_file\", \"Delete\");\r\n        gui += \"</td>\";\r\n        gui += \"<td>\" + file.name + \"</td>\";\r\n        gui += \"<td class='small_cell text-right'>\" + file.size + \"</td>\";\r\n        gui += \"</tr>\";\r\n    });\r\n\r\n    gui += \"</tbody>\";\r\n    gui += \"</table>\";\r\n    gui += \"</div>\";\r\n    gui += \"</div>\";\r\n    gui += \"</div>\";\r\n\r\n    $(\"#main_container\").html(gui);\r\n}\r\n\r\nfunction openUserModal(operation, color = \"primary\", json_ob = null) {\r\n    json_ob = json_ob !== null ? json_ob : empty_object;\r\n    operation = capitalizeEachWord(operation);\r\n    var modal_id = \"user_modal\";\r\n\r\n    var gui = \"\";\r\n    gui += \"<div id='\" + modal_id + \"' class='modal \" + color + \" fade' role='dialog'>\";\r\n    gui += \"<div class='modal-dialog'>\";\r\n    gui += \"<div class='modal-content'>\";\r\n    gui += \"<div class='modal-header'><h4 class='modal-title text-capitalize'>\" + operation + \" User</h4></div>\";\r\n    gui += \"<div class='modal-body'>\";\r\n\r\n    gui += getUserForm(json_ob, \"add_edit_form\");\r\n\r\n    let id = \"\";\r\n\r\n    if (json_ob !== null) {\r\n        if (json_ob.hasOwnProperty(\"id\")) {\r\n            id = \" data-user_id='\" + json_ob.id + \"'\";\r\n        }\r\n    }\r\n\r\n    gui += \"</div>\";\r\n    gui += \"<div class='modal-footer'>\";\r\n    gui += \"<button type='submit' form='add_edit_form' \" + id + \" data-operation='user_\" + operation.toLowerCase() + \"' id='user_operation' class='btn btn-\" + color + \"'>\" + operation + \"</button>\";\r\n    gui += \"<button type='reset' form='add_edit_form' class='btn btn-default'>Clear</button>\";\r\n    gui += \"<button type='button' class='btn btn-default' data-dismiss='modal'>Cancel</button>\";\r\n    gui += \"</div>\";\r\n    gui += \"</div>\";\r\n    gui += \"</div>\";\r\n    gui += \"</div>\";\r\n\r\n    if ($('#' + modal_id).length) {\r\n        $('#' + modal_id).replaceWith(gui);\r\n    } else {\r\n        $(\"body\").append(gui);\r\n    }\r\n\r\n    $('#' + modal_id).modal({backdrop: 'static', keyboard: false}, 'show');\r\n\r\n\r\n    if ($(\".modal.in\").length > 0) {\r\n        var zindex = JSON.parse($(\".modal.in:last\").css(\"z-index\"));\r\n        $('#' + modal_id).css(\"z-index\", zindex + 1);\r\n    }\r\n\r\n    triggerTooltip();\r\n}\r\n\r\nfunction openChangePasswordModal() {\r\n    let color = \"warning\";\r\n    var modal_id = \"change_password_modal\";\r\n\r\n    var gui = \"\";\r\n    gui += \"<div id='\" + modal_id + \"' class='modal \" + color + \" fade' role='dialog'>\";\r\n    gui += \"<div class='modal-dialog'>\";\r\n    gui += \"<div class='modal-content'>\";\r\n    gui += \"<div class='modal-header'><h4 class='modal-title text-capitalize'>Change Password</h4></div>\";\r\n    gui += \"<div class='modal-body'>\";\r\n\r\n    gui += \"<form class='form-horizontal' id='change_password_form'>\";\r\n    gui += getTextFiled(\"Current Password\", \"current_user_password\", \"Current Password\", \"password\");\r\n    gui += getTextFiled(\"New Password\", \"user_password\", \"New Password\", \"password\");\r\n    gui += getTextFiled(\"Repeat New Password\", \"user_password_2\", \"Repeat New Password\", \"password\");\r\n    gui += \"</form>\";\r\n\r\n    gui += \"</div>\";\r\n    gui += \"<div class='modal-footer'>\";\r\n    gui += \"<button type='submit' form='change_password_form' id='change_password' class='btn btn-\" + color + \"'>Change</button>\";\r\n    gui += \"<button type='reset' form='change_password_form' class='btn btn-default'>Clear</button>\";\r\n    gui += \"<button type='button' class='btn btn-default' data-dismiss='modal'>Cancel</button>\";\r\n    gui += \"</div>\";\r\n    gui += \"</div>\";\r\n    gui += \"</div>\";\r\n    gui += \"</div>\";\r\n\r\n    if ($('#' + modal_id).length) {\r\n        $('#' + modal_id).replaceWith(gui);\r\n    } else {\r\n        $(\"body\").append(gui);\r\n    }\r\n\r\n    $('#' + modal_id).modal({backdrop: 'static', keyboard: false}, 'show');\r\n\r\n\r\n    if ($(\".modal.in\").length > 0) {\r\n        var zindex = JSON.parse($(\".modal.in:last\").css(\"z-index\"));\r\n        $('#' + modal_id).css(\"z-index\", zindex + 1);\r\n    }\r\n\r\n    triggerTooltip();\r\n}\r\n\r\nfunction openConfirmDeleteModal() {\r\n    let color = \"danger\";\r\n    var modal_id = \"logout_modal\";\r\n\r\n    var gui = \"\";\r\n    gui += \"<div id='\" + modal_id + \"' class='modal \" + color + \" fade' role='dialog'>\";\r\n    gui += \"<div class='modal-dialog modal-sm'>\";\r\n    gui += \"<div class='modal-content'>\";\r\n    gui += \"<div class='modal-header'><h4 class='modal-title text-capitalize'>Confirm Logout</h4></div>\";\r\n    gui += \"<div class='modal-body'>\";\r\n\r\n    gui += \"Do you really want to logout?\";\r\n\r\n    gui += \"</div>\";\r\n    gui += \"<div class='modal-footer'>\";\r\n    gui += \"<button type='submit' id='confirm_logout' class='btn btn-\" + color + \"'>Yes</button>\";\r\n    gui += \"<button type='button' class='btn btn-default' data-dismiss='modal'>No</button>\";\r\n    gui += \"</div>\";\r\n    gui += \"</div>\";\r\n    gui += \"</div>\";\r\n    gui += \"</div>\";\r\n\r\n    if ($('#' + modal_id).length) {\r\n        $('#' + modal_id).replaceWith(gui);\r\n    } else {\r\n        $(\"body\").append(gui);\r\n    }\r\n\r\n    $('#' + modal_id).modal({backdrop: 'static', keyboard: false}, 'show');\r\n\r\n\r\n    if ($(\".modal.in\").length > 0) {\r\n        var zindex = JSON.parse($(\".modal.in:last\").css(\"z-index\"));\r\n        $('#' + modal_id).css(\"z-index\", zindex + 1);\r\n    }\r\n\r\n    triggerTooltip();\r\n}\r\n\r\nfunction openConfirmLogout() {\r\n    let color = \"danger\";\r\n    var modal_id = \"logout_modal\";\r\n\r\n    var gui = \"\";\r\n    gui += \"<div id='\" + modal_id + \"' class='modal \" + color + \" fade' role='dialog'>\";\r\n    gui += \"<div class='modal-dialog modal-sm'>\";\r\n    gui += \"<div class='modal-content'>\";\r\n    gui += \"<div class='modal-header'><h4 class='modal-title text-capitalize'>Confirm Logout</h4></div>\";\r\n    gui += \"<div class='modal-body'>\";\r\n\r\n    gui += \"Do you really want to logout?\";\r\n\r\n    gui += \"</div>\";\r\n    gui += \"<div class='modal-footer'>\";\r\n    gui += \"<button type='submit' id='confirm_logout' class='btn btn-\" + color + \"'>Yes</button>\";\r\n    gui += \"<button type='button' class='btn btn-default' data-dismiss='modal'>No</button>\";\r\n    gui += \"</div>\";\r\n    gui += \"</div>\";\r\n    gui += \"</div>\";\r\n    gui += \"</div>\";\r\n\r\n    if ($('#' + modal_id).length) {\r\n        $('#' + modal_id).replaceWith(gui);\r\n    } else {\r\n        $(\"body\").append(gui);\r\n    }\r\n\r\n    $('#' + modal_id).modal({backdrop: 'static', keyboard: false}, 'show');\r\n\r\n\r\n    if ($(\".modal.in\").length > 0) {\r\n        var zindex = JSON.parse($(\".modal.in:last\").css(\"z-index\"));\r\n        $('#' + modal_id).css(\"z-index\", zindex + 1);\r\n    }\r\n\r\n    triggerTooltip();\r\n}\r\n\r\nfunction openUploadModal() {\r\n    let color = \"primary\";\r\n    var modal_id = \"upload_modal\";\r\n\r\n    var gui = \"\";\r\n    gui += \"<div id='\" + modal_id + \"' class='modal \" + color + \" fade' role='dialog'>\";\r\n    gui += \"<div class='modal-dialog'>\";\r\n    gui += \"<div class='modal-content'>\";\r\n    gui += \"<div class='modal-header'><h4 class='modal-title text-capitalize'>Upload File</h4></div>\";\r\n    gui += \"<div class='modal-body'>\";\r\n\r\n    gui += \"<form id='file_upload_form' action='upload.php' method='post' enctype='multipart/form-data' class='form-horizontal'>\";\r\n\r\n    gui += \"<div class='form-group'>\";\r\n    gui += \"<label for='user_file' class='col-sm-2 control-label'>File</label>\";\r\n    gui += \"<div class='col-sm-10'>\";\r\n    gui += \"<input type='file' class='form-control' id='user_file'>\";\r\n    gui += \"</div>\";\r\n    gui += \"</div>\";\r\n\r\n    gui += \"</form>\";\r\n\r\n\r\n    gui += \"</div>\";\r\n    gui += \"<div class='modal-footer'>\";\r\n    gui += \"<button type='submit' form='file_upload_form' class='btn btn-\" + color + \"'>Upload</button>\";\r\n    gui += \"<button type='button' class='btn btn-default' data-dismiss='modal'>Cancel</button>\";\r\n    gui += \"</div>\";\r\n    gui += \"</div>\";\r\n    gui += \"</div>\";\r\n    gui += \"</div>\";\r\n\r\n    if ($('#' + modal_id).length) {\r\n        $('#' + modal_id).replaceWith(gui);\r\n    } else {\r\n        $(\"body\").append(gui);\r\n    }\r\n\r\n    $('#' + modal_id).modal({backdrop: 'static', keyboard: false}, 'show');\r\n\r\n\r\n    if ($(\".modal.in\").length > 0) {\r\n        var zindex = JSON.parse($(\".modal.in:last\").css(\"z-index\"));\r\n        $('#' + modal_id).css(\"z-index\", zindex + 1);\r\n    }\r\n\r\n    triggerTooltip();\r\n}\r\n\r\nfunction isLoggedIn() {\r\n    $.ajax({\r\n        url: \"../classes/user.php\",\r\n        beforeSend: function () {\r\n        },\r\n        data: {\r\n            operation: \"is_logged_in\"\r\n        },\r\n        type: \"POST\",\r\n        success: function (response) {\r\n            var json_ob = JSON.parse(response);\r\n            if (json_ob !== false) {\r\n                if (json_ob.logged_in_user === false) {\r\n                    displayLoginForm(empty_object);\r\n                } else {\r\n                    logged_in_object = json_ob.logged_in_user;\r\n\r\n                    if (json_ob.hasOwnProperty(\"users\")) {\r\n                        displayUserTable(json_ob.users);\r\n                    } else {\r\n                        displayUserFiles(json_ob);\r\n                    }\r\n                }\r\n            }\r\n        },\r\n        error: function (response) {\r\n        }\r\n    });\r\n}\r\n\r\nfunction logout() {\r\n    $.ajax({\r\n        url: \"../classes/user.php\",\r\n        beforeSend: function () {\r\n        },\r\n        data: {\r\n            operation: \"signout\"\r\n        },\r\n        type: \"POST\",\r\n        success: function (response) {\r\n            var json_ob = JSON.parse(response);\r\n            if (json_ob !== false) {\r\n                destroyModal($(\"#logout_modal\"));\r\n                displayLoginForm(empty_object);\r\n                showAlert(json_ob);\r\n            }\r\n        },\r\n        error: function (response) {\r\n        }\r\n    });\r\n}\r\n\r\nfunction getEditProfile() {\r\n    $.ajax({\r\n        url: \"../classes/user.php\",\r\n        beforeSend: function () {\r\n        },\r\n        data: {\r\n            operation: \"get_edit_profile\"\r\n        },\r\n        type: \"POST\",\r\n        success: function (response) {\r\n            var json_ob = JSON.parse(response);\r\n            if (json_ob !== false) {\r\n                json_ob[0].operation = \"edit\";\r\n                openUserModal(\"edit\", \"warning\", json_ob[0]);\r\n            }\r\n        },\r\n        error: function (response) {\r\n        }\r\n    });\r\n}\r\n\r\nfunction changePassword() {\r\n    $.ajax({\r\n        url: \"../classes/user.php\",\r\n        beforeSend: function () {\r\n        },\r\n        data: {\r\n            operation: \"change_password\",\r\n            current_password: $(\"#change_password_form #current_user_password\").val(),\r\n            user_password: $(\"#change_password_form #user_password\").val(),\r\n            user_password_2: $(\"#change_password_form #user_password_2\").val()\r\n        },\r\n        type: \"POST\",\r\n        success: function (response) {\r\n            var json_ob = JSON.parse(response);\r\n            if (json_ob !== false) {\r\n                if (json_ob.logged_in_user === false) {\r\n                    showAlert(setError(\"Invalid credentials\"));\r\n                } else {\r\n                    destroyModal($(\"#change_password_modal\"));\r\n                    showAlert(json_ob.message);\r\n                    logged_in_object = json_ob.logged_in_user;\r\n                    displayUserTable(json_ob.users);\r\n                }\r\n            }\r\n        },\r\n        error: function (response) {\r\n        }\r\n    });\r\n}\r\n\r\nfunction uploadFiles() {\r\n    var file_data = $('#user_file').prop('files')[0];\r\n    var form_data = new FormData();\r\n    form_data.append('user_files', file_data);\r\n    form_data.append('operation', \"file_upload\");\r\n\r\n    $.ajax({\r\n        url: \"../classes/user.php\",\r\n        beforeSend: function () {\r\n        },\r\n        cache: false,\r\n        contentType: false,\r\n        processData: false,\r\n        data: form_data,\r\n        type: \"POST\",\r\n        success: function (response) {\r\n            var json_ob = JSON.parse(response);\r\n            if (json_ob !== false) {\r\n                if (JSON.parse(json_ob.status) === 2) {\r\n                    destroyModal($(\"#upload_modal\"));\r\n                    displayUserFiles(json_ob);\r\n                }\r\n                showAlert(json_ob.message);\r\n            }\r\n        },\r\n        error: function (response) {\r\n        }\r\n    });\r\n}"]}